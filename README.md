yaml_temp
=========

Пояснения по поводу YAML
## Общие моменты
### 1) Символ "-" (без кавычек) образует массив. Нужно внимательно отнестись к ним:
```YAML
- test1
- test2
- test3
```
образует
```Ruby
["test1","test2","test3"]
```

### 2) "ключ: значение" образует хэш:
```YAML
name: Это имя
value: Это значение
```
образует
```Ruby
{"name" => "Это имя", "value" => "Это значение"}
```
но если переписать чуть по другому пример:
```YAML
- name: Это имя
- value: Это значение
```
то объект в Ruby будет выглядеть уже совсем по другому. Это будет массив хэшей:
```Ruby
[{"name" => "Это имя"},{"value" => "Это значение"}]
```

### 3) Очень важны отступы. Например если нам нужно определить несколько значений для ключа напрмиер values:
```YAML
name: Это имя
attrs:
  attr1: Значение 1
  attr2: Значение2
  attr3: Третье значение
```
то в Ruby это будет выглядеть как:
```Ruby
{"name"=>"Это имя", "attrs"=>{"attr1"=>"Значение 1", "attr2"=>"Значение2", "attr3"=>"Третье значение"}}
```
но если убрать отступы:
```YAML
name: Это имя
attrs:
attr1: Значение 1
attr2: Значение2
attr3: Третье значение
```
то получится совсем другой код:
```Ruby
{"name"=>"Это имя", "attrs"=>nil, "attr1"=>"Значение 1", "attr2"=>"Значение2", "attr3"=>"Третье значение"}
```
**Важно**: Используйте 2 пробела в качестве отступа. Sublime Text 2 можно настроить что бы он воспринимал нажатие TAB как 2 пробела:
```Text
Preferences -> Settings - Default
Установить "tab_size": 2
Установить "translate_tabs_to_spaces": true
```
## Формат для импорта
### 1) Синонимы
* Любое значение может использовать синонимы
* Синонимы пишутся через исмвол "|" (pipe, без ковычек)

Например у нас есть Категория (товарная группа):

```YAML
- name: Кирпич облицовочный силикатный|Кирпич облицовочный безобжиговый метод
  attributes:
    - name: Состав
      values:
        - Силикатный с кварцевым песком
        - Силикатный известково-шлаковый
        - Силикатный известково-зольный
    - name: Вид кирпича
      values:
        - Полнотелый
        - Пустотелый
    - name: Фактура поверхности граней
      values:
        - Гладкий
        - Рельефный
        - Рустированный|со сколотой фактурой
    - name: Размер
      values:
      - КО|кирпич одинарный
      - КЕ|кирпич «ЕВРО»
      - КУ|кирпич утолщенный полуторный
      - КМ|кирпич модульный одинарный 
      - КМУ|кирпич модульный утолщенный
    - name: Марка|прочность
      values:
        - M25
        - M35
        - M50
        - M75
        - M100
        - M125
        - M150
    - name: Морозостойкость
      values:
        - 25
        - 35
        - 50
        - 75
        - 100
      metric: F|циклы
    - name: Средняя плотность
      values:
        - Заполняется производителем
      metric: кг/м3
    - name: Коэфф. теплопроводности|Коэффициент теплопроводности|Теплопроводность
      values:
        - Заполняется производителем
    - name: Цвет
      values:
        - Заполняется производителем
    - name: Фактурные поверхности
      values:
        - Ложковая
        - Тычковая  
```

Как видно из кода у некоторых значений есть синонимы, например есть аттрибут с **name** => **"Коэфф. теплопроводности|Коэффициент теплопроводности|Теплопроводность"**.
Допустим надо написать вместо двух синонимов названия аттрибута **"Коэфф. теплопроводности"** один шаблон который бы включал их оба:
```YAML
- name: Коэфф. теплопроводности|/.*теплопроводност.*/i
```
Проверяем что получилось в Ruby:
```Ruby
1.9.3p286 :073 > /.*теплопроводност.*/i.match("Коэфф. теплопроводности")
 => #<MatchData "Коэфф. теплопроводности"> 
1.9.3p286 :074 > /.*теплопроводност.*/i.match("Теплопроводность")
 => #<MatchData "Теплопроводность"> 
1.9.3p286 :075 > /.*теплопроводност.*/i.match("Коэффициент теплопроводности")
 => #<MatchData "Коэффициент теплопроводности"> 
```